webpackJsonp([1],{"34+y":function(e,t){},"5y19":function(e,t){},C9wM:function(e,t){e.exports={download:"src-components--download-2plWg_0",content:"src-components--download-2NSBQ_0",slogen:"src-components--download-247vd_0",btn:"src-components--download-EF7YX_0"}},HHTN:function(e,t){},UoMW:function(e,t){var n,o,i,a,s,c;n=document,o=window,i=n.documentElement,a=o.config.pageWidth,s="orientationchange"in o?"orientationchange":"resize",c=function(){var e=i.clientWidth;i.style.fontSize=0<a?(e&&e<a?e:a)/7.5+"px":e/7.5+"px"},n.addEventListener&&(o.addEventListener(s,c,!1),n.addEventListener("DOMContentLoaded",c,!1),setTimeout(function(){0===parseInt(n.defaultView.getComputedStyle(i).fontSize)&&c()},3e3))},"djk/":function(e,t){},g99T:function(e,t){},sGrF:function(e,t){},xkhy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("34+y");var o=n("X+yh"),i=n.n(o),a=n("/5sW"),s=n("cTzj"),c=n.n(s),r={name:"App",created:function(){window.curpage=1}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var d=n("VU/8")(r,l,!1,function(e){n("5y19")},null,null).exports,u=n("/ocq"),p=(Boolean,String,String,String,{name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(e){this.$emit("update:show",e)}}}),f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:e.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading",class:e.text?"":"vux-loading-no-text"},[n("div",{staticClass:"weui-mask_transparent"}),e._v(" "),n("div",{staticClass:"weui-toast",style:{position:e.position}},[n("i",{staticClass:"weui-loading weui-icon_toast"}),e._v(" "),e.text?n("p",{staticClass:"weui-toast__content"},[e._v(e._s(e.text||"加载中")),e._t("default")],2):e._e()])])])},staticRenderFns:[]};var g=n("VU/8")(p,f,!1,function(e){n("HHTN")},null,null).exports,m=n("//Fk"),v=n.n(m),h=n("pFYg"),w=n.n(h),y=n("fZjL"),C=n.n(y),_=[],x=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new v.a(function(t,n){var o=e.url;if(!e.concurrent){if(o=o.split("?")[0],-1!==_.indexOf(o))return void n(new Error("请求并发 "+o));_.push(o)}(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=e.type?e.type.toUpperCase():"POST",s=e.url||"",c=e.contentType||"application/x-www-form-urlencoded",r=e.data||{},l=!1!==e.async;return new v.a(function(t,n){var o={};o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject;var i="";C()(r).forEach(function(e){i+=e+"="+r[e]+"&"}),i=i.substr(0,i.lastIndexOf("&")),"GET"==a?(s=i?s+"?"+i:s,o.open(a,s,l),o.setRequestHeader("Content-type",c),o.send()):"POST"==a?(o.open(a,s,l),o.setRequestHeader("Content-type",c),o.send(i)):n(new Error("不支持的type")),o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status){var e=o.response;"object"!==(void 0===e?"undefined":w()(e))&&(e=JSON.parse(e)),t(e)}else n(o)}})})(e).then(function(e){0===e.code?t(e):n(e)}).catch(function(e){n(e)}).finally(function(){var e=_.indexOf(o);-1!==e&&_.splice(e,1)})})},b=envConfig.requestDomain,k=function(e){return x({url:b+"/pet-api/invite/activityIsOpen",data:e})},T=n("BO1k"),P=n.n(T),O=function(){var e=window.location.href.split("?"),t={};if(1<e.length){var n=e[1],o=-1!==n.indexOf("%23/")?n.indexOf("%23/"):n.indexOf("#/");-1!==o&&(n=n.substr(0,o));var i=!0,a=!1,s=void 0;try{for(var c,r=P()(n.split("&"));!(i=(c=r.next()).done);i=!0){var l=c.value.split("=");l[0]&&(t[l[0]]=l[1]||"")}}catch(e){a=!0,s=e}finally{try{!i&&r.return&&r.return()}finally{if(a)throw s}}}return t},S=envConfig.requestDomain,E=(envConfig.manageDomain,function(e){return x({url:S+"/pet-api/wx/ticket",data:{code:e}})}),B=function(e){return S+"/pet-api/user/activity/generateImageCode?mobileKey="+e},$=function(e){return x({url:S+"/pet-api/user/activity/genVerifyCode",data:e})},q=function(e){return x({url:S+"/pet-api/user/activity/login",data:e})},A=function(e){return x({url:S+"/pet-api/user/activity/isBindingOpenId",data:e})},D=(envConfig.requestDomain,envConfig.requestDomain,envConfig.requestDomain,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.location.href,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"snsapi_userinfo",n="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+envConfig.shareAppid+"&redirect_uri="+escape(e)+"&response_type=code&scope="+t+"&state=STATE#wechat_redirect";window.location.href=n,console.log(escape(e)),console.log(n)}),F=navigator.userAgent,N={android:-1<F.indexOf("Android")||-1<F.indexOf("Linux"),ios:-1<F.indexOf("iPhone")||-1<F.indexOf("iPad"),iphone:-1<F.indexOf("iPhone"),weixin:-1<F.toLowerCase().indexOf("micromessenger")},U=n("bOdI"),I=n.n(U),L=config.downloadApp,j=config.downloadLogo,R=config.downloadTitle,M=config.downloadDescription,V=(String,config.downloadApp),W=config.downloadLogo,H=config.downloadTitle,K=config.downloadDescription,z={name:"download",props:{position:{type:String,default:"bottom"}},data:function(){return{style:I()({},this.position,0),downloadLogo:W,downloadTitle:H,downloadDescription:K}},methods:{downloadApp:V}},X={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.download,style:e.style},[n("div",{class:e.$style.content},[n("img",{attrs:{src:e.downloadLogo,alt:"宠物家"}}),e._v(" "),n("div",{class:e.$style.slogen},[n("span",{domProps:{textContent:e._s(e.downloadTitle)}}),e._v(" "),n("span",{domProps:{textContent:e._s(e.downloadDescription)}})])]),e._v(" "),n("div",{class:e.$style.btn,on:{click:e.downloadApp}},[e._v("立即打开")])])},staticRenderFns:[]};var G=n("VU/8")(z,X,!1,function(e){this.$style=n("C9wM")},null,null).exports,J=(config.downloadApp,O(),(new Date).getTime(),envConfig.shareDomain,config.downloadApp),Y=O(),Q=N.weixin,Z=(new Date).getTime(),ee=envConfig.shareDomain+"/static/content/html5/byvue/dist/201812/inviteactivity/index.html",te={name:"Index",data:function(){return{loading:!1,curpage:window.curpage,openid:"",nickname:"",wxPic:"",isNewUser:window.isNewUser,fullurl:"",successImg:""}},created:function(){var n=this;this.fullurl=this.getFullUrl(ee),k().then(function(e){if(1==e.data.isOpen)console.log(23232),WeixinJSBridge.call("closeWindow");else if(Q){console.log(1221);var t=Y.code;t?(console.log("直接获取"+t),E(t).then(function(e){e.data.openid&&(n.openid=e.data.openid,n.rightWeixincode=!0),n.openid&&A({openId:n.openid}).then(function(e){1==e.data.status?0<e.data.isAvailable?n.successImg="http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15451906188910899795.png":n.curpage=2:n.$router.push("login")})}).catch(function(e){console.warn(e),e.msg&&Toast(e.msg)}).finally(function(){n.rightWeixincode||(console.log("重新获取1"),D(n.fullurl))})):(console.log("重新获取2"),D(n.fullurl))}})},methods:{getFullUrl:function(e){if(e)return e+"?t="+Z},downloadApp:J},components:{Loading:g,downloadComp:G}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e.loading?n("loading"):e._e(),e._v(" "),e.loading?e._e():n("div",{staticClass:"index"},[n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.curpage,expression:"curpage == 1"}],staticClass:"success"},[n("img",{attrs:{src:e.successImg}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.curpage,expression:"curpage == 2"}],staticClass:"fail"},[n("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15450385673340832833.png"}})])])],1)},staticRenderFns:[]};var oe=n("VU/8")(te,ne,!1,function(e){n("sGrF")},"data-v-72ad6c8c",null).exports,ie=n("NC6I"),ae=n.n(ie),se=(config.cellPhoneReg,config.cellPhoneReg),ce={name:"login",props:["placeholders"],beforeMount:function(){this.updateCode()},data:function(){return{mobileKey:"",imgcodeUrl:"",cellPhone:"",imgcode:"",code:"",genVerifyCodeFlag:!1,getCodeBtnText:"获取验证码",getCodeBtnClass:""}},methods:{confirmclicked:function(){this.checkoutNum()&&this.$emit("confirm",{cellPhone:this.cellPhone,code:this.code})},getCode:function(){this.checkoutNum(1)&&this.$emit("getCode",{phone:this.cellPhone,code:this.imgcode,encryptionCode:ae()("chongwujia_2018"+this.cellPhone),mobileKey:this.mobileKey})},updateCode:function(){this.mobileKey=""+(new Date).getTime()+parseInt(1e5*(9*Math.random()+1)),this.imgcodeUrl=B(this.mobileKey)},countdown:function(e){var t=this;this.getCodeBtnClass="grey",this.countBackwards({total:60,callback:function(e){e?t.getCodeBtnText=e+"秒":(t.getCodeBtnClass="",t.getCodeBtnText="重新获取",t.genVerifyCodeFlag=!1)}}),e&&e()},checkoutNum:function(e){if(this.cellPhone)if(se.test(this.cellPhone))if(this.imgcode)if(this.imgcode.length<4)Toast("请检查图形验证码");else if(this.code||1===e){if(!(this.code.length<4&&1!==e))return!0;Toast("请检查短信验证码")}else Toast("请输入短信验证码");else Toast("请输入图形验证码");else Toast("请检查手机号");else Toast("请输入手机号")},countBackwards:function(e){var t=this,n=(e=e||{}).total?e.total:10,o=e.speed?e.speed:1,i=e.time?e.time:1e3,a=e.counted?e.counted:0,s=e.callback?e.callback:0,c=e.callbackOnce?e.callbackOnce:0,r=e.callbackEnd?e.callbackEnd:0,l=0<=n-a?n-a:0;setTimeout(function(){if(0!==l){var e=0<=l-o?l-o:0;a+=o,s&&s(e),c&&c(e),0==e&&r&&r(e),t.countBackwards({total:n,speed:o,time:i,counted:a,callback:s,callbackOnce:c,callbackEnd:r})}},i)}}},re={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"user-form"},[n("div",{staticClass:"form-cellPhone"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cellPhone,expression:"cellPhone"}],attrs:{type:"number",placeholder:t.placeholders&&t.placeholders[0]||"请输入手机号"},domProps:{value:t.cellPhone},on:{input:function(e){e.target.composing||(t.cellPhone=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-imgcode"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.imgcode,expression:"imgcode"}],attrs:{type:"number",placeholder:t.placeholders&&t.placeholders[1]||"请输入图形验证码"},domProps:{value:t.imgcode},on:{input:function(e){e.target.composing||(t.imgcode=e.target.value)}}}),t._v(" "),n("img",{attrs:{src:t.imgcodeUrl},on:{click:function(e){return e.stopPropagation(),t.updateCode(e)}}})]),t._v(" "),n("div",{staticClass:"form-code"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"number",placeholder:t.placeholders&&t.placeholders[2]||"请输入验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),n("span",{class:t.getCodeBtnClass,on:{click:function(e){return e.stopPropagation(),t.getCode(e)}}},[t._v(t._s(t.getCodeBtnText))])])]),t._v(" "),n("div",{staticClass:"user-btn",on:{click:t.confirmclicked}},[t._t("confirmBtn",[n("div",[t._v("确认")])])],2)])},staticRenderFns:[]};var le=n("VU/8")(ce,re,!1,function(e){n("djk/")},"data-v-f8b0d934",null).exports,de={name:"index",data:function(){return{submitFlag:!1,placeholders:["","",""],issubmits:!0}},components:{login:le},created:function(){},beforeMount:function(){},methods:{getCode:function(e){var t=this,n=e;n.openid=window.openid||"",$(n).then(function(e){t.$refs.login.countdown()}).catch(function(e){console.warn(e),e.msg&&Toast(e.msg)})},submit:function(e){var t=this;e.openId=window.openid||"",this.issubmits&&(this.issubmits=!1,q(e).then(function(e){console.log(e)}).catch(function(e){console.warn(e),t.issubmits=!0,e.msg&&Toast(e.msg)}))}}},ue={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"loginpage"},[e._m(0),e._v(" "),e._m(1),e._v(" "),n("div",{staticClass:"login-text"},[e._v("注册或登录即可查看报告还有惊喜优惠券哦~")]),e._v(" "),n("login",{ref:"login",attrs:{placeholders:e.placeholders},on:{confirm:e.submit,getCode:e.getCode}},[n("div",{staticClass:"loginbtn",attrs:{slot:"confirmBtn"},slot:"confirmBtn"},[e._v("立即领取")])])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-top"},[t("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15415064332893807850.png",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-mid"},[t("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15415067662872695860.png",alt:""}})])}]};var pe=n("VU/8")(de,ue,!1,function(e){n("g99T")},"data-v-3288d9dc",null).exports;a.default.use(u.a);var fe=new u.a({routes:[{path:"/",redirect:"/index"},{path:"/index",name:"index",component:oe},{path:"/login",name:"login",component:pe}]});n("UoMW");!function(e,t){if((t=t||{}).favicon){var n=[];e.querySelector('link[rel="shortcut icon"]')&&n.push(e.querySelector('link[rel="shortcut icon"]')),e.querySelector('link[rel="icon"]')&&n.push(e.querySelector('link[rel="icon"]')),e.querySelector('link[rel="apple-touch-icon-precomposed"]')&&n.push(e.querySelector('link[rel="apple-touch-icon-precomposed"]'));var o=!0,i=!1,a=void 0;try{for(var s,c=P()(n);!(o=(s=c.next()).done);o=!0){s.value.setAttribute("href",t.favicon)}}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}}}(document,config),a.default.use(c.a),window.Toast=i.a,new a.default({router:fe,components:{App:d},render:function(e){return e(d)}}).$mount("#app")}},["xkhy"]);
//# sourceMappingURL=app.5305d2c2abc7e11e16db.js.map