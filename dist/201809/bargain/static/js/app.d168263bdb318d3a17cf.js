webpackJsonp([1],{"34+y":function(t,e){},"57QP":function(t,e,i){t.exports=i.p+"../../../static/images/201809/bargainshare/toolpopup/tool.png"},"7nRF":function(t,e,i){t.exports=i.p+"../../../static/images/icons/dogsad.png"},Iatn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("q/am");var i=n("4VPn"),a=n.n(i),s=(n("34+y"),n("X+yh")),o=n.n(s),r=n("/5sW"),c=n("/ocq"),l=n("BO1k"),m=n.n(l),d=function(){var t=window.location.href.split("?"),e={};if(1<t.length){var i=t[1],a=-1!==i.indexOf("%23/")?i.indexOf("%23/"):i.indexOf("#/");-1!==a&&(i=i.substr(0,a));var s=!0,n=!1,o=void 0;try{for(var r,c=m()(i.split("&"));!(s=(r=c.next()).done);s=!0){var l=r.value.split("=");l[0]&&(e[l[0]]=l[1]||"")}}catch(t){n=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}}return e},u=d(),p=[];u.system&&(p=u.system.split("_"));var v,h={android:"android"===p[0],ios:"ios"===p[0],version:p[1]?""+p[1]:"",Terminal:{platform:(v=navigator.userAgent,{android:-1<v.indexOf("Android")||-1<v.indexOf("Linux"),iPhone:-1<v.indexOf("iPhone"),iPad:-1<v.indexOf("iPad")}),language:(navigator.browserLanguage||navigator.language).toLowerCase()}},f=n("Dd8w"),g=n.n(f),y=n("NYxO"),k=config.userAvatar,b=(config.getFullPetAvatar,config.userAvatar),w={name:"petlist",props:["tabs","lists","selectedPetId","searchPlaceholder","tabIndex"],data:function(){return{userAvatar:b,curtab:this.tabIndex||0,searchText:""}},methods:{getFullPetAvatar:config.getFullPetAvatar}},I={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{class:i.$style.petlist},[a("div",{class:i.$style.tab},[a("div",i._l(i.tabs,function(t,e){return a("div",{key:"a"+e,class:i.curtab===e&&i.$style.active,domProps:{textContent:i._s(t)},on:{click:function(t){i.curtab=e}}})}))]),i._v(" "),a("div",{class:i.$style.search},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:i.searchPlaceholder||"请输入爱宠类型"},domProps:{value:i.searchText},on:{input:[function(t){t.target.composing||(i.searchText=t.target.value)},function(t){i.$emit("searchInput",i.searchText)}]}})]),i._v(" "),a("div",{class:i.$style.list},i._l(i.lists,function(t,e){return a("div",{directives:[{name:"show",rawName:"v-show",value:i.curtab===e,expression:"curtab === listindex"}],key:"b"+e},i._l(t,function(t,e){return a("div",{key:"c"+e},[a("div",{class:i.$style.title,domProps:{textContent:i._s(t.firstLetter)}}),i._v(" "),i._l(t.list,function(e,t){return a("div",{key:"d"+t,class:i.$style.item,on:{click:function(t){i.$emit("itemClicked",{id:e.petId,name:e.petName,kind:e.petKind,tabIndex:i.curtab})}}},[a("div",[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{src:i.getFullPetAvatar(e.avatar),error:i.userAvatar},expression:"{src: getFullPetAvatar(item.avatar), error: userAvatar}"}],key:e.avatar}),i._v(" "),a("div",{domProps:{textContent:i._s(e.petName)}})]),i._v(" "),e.petId==i.selectedPetId?a("div",[a("img",{attrs:{src:n("sKV8")}})]):i._e()])})],2)}))}))])},staticRenderFns:[]};var P=n("VU/8")(w,I,!1,function(t){this.$style=n("VmDL")},null,null).exports,C=null,_=(g()({},Object(y.e)(["petList","selectedPetId","petListCurtab","listpage"])),g()({},Object(y.d)(["setSelectedPetInfo","updateListpage"]),Object(y.b)(["getPetList","getBargainList"]),{searchInput:function(t){var e=this;C||(C=!0,setTimeout(function(){C=!1,e.getPetList(t)},200))},itemClicked:function(t){t.id==this.selectedPetId&&(t.id="",t.name=""),this.setSelectedPetInfo(t),this.updateListpage(1),this.getBargainList(),this.$router.go(-1)}}),null),x={name:"petlist",computed:g()({},Object(y.e)(["petList","selectedPetId","petListCurtab","listpage"])),created:function(){this.getPetList()},methods:g()({},Object(y.d)(["setSelectedPetInfo","updateListpage"]),Object(y.b)(["getPetList","getBargainList"]),{searchInput:function(t){var e=this;_||(_=!0,setTimeout(function(){_=!1,e.getPetList(t)},200))},itemClicked:function(t){t.id==this.selectedPetId&&(t.id="",t.name=""),this.setSelectedPetInfo(t),this.updateListpage(1),this.getBargainList(),this.$router.go(-1)}}),components:{petlistComp:P}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"index"},[i("petlist-comp",{attrs:{tabIndex:t.petListCurtab,tabs:["汪星人","喵星人"],lists:[t.petList.dogs,t.petList.cats],selectedPetId:t.selectedPetId},on:{itemClicked:t.itemClicked,searchInput:t.searchInput}})],1)])},staticRenderFns:[]},T=n("VU/8")(x,L,!1,null,null,null).exports,S=n("//Fk"),O=n.n(S),U=n("pFYg"),A=n.n(U),D=n("fZjL"),j=n.n(D),R=[],$=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new O.a(function(e,i){var a=t.url;if(!t.concurrent){if(a=a.split("?")[0],-1!==R.indexOf(a))return void i(new Error("请求并发 "+a));R.push(a)}(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.type?t.type.toUpperCase():"POST",o=t.url||"",r=t.contentType||"application/x-www-form-urlencoded",c=t.data||{},l=!1!==t.async;return new O.a(function(e,i){var a={};a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject;var s="";j()(c).forEach(function(t){s+=t+"="+c[t]+"&"}),s=s.substr(0,s.lastIndexOf("&")),"GET"==n?(o=s?o+"?"+s:o,a.open(n,o,l),a.setRequestHeader("Content-type",r),a.send()):"POST"==n?(a.open(n,o,l),a.setRequestHeader("Content-type",r),a.send(s)):i(new Error("不支持的type")),a.onreadystatechange=function(){if(4==a.readyState)if(200==a.status){var t=a.response;"object"!==(void 0===t?"undefined":A()(t))&&(t=JSON.parse(t)),e(t)}else i(a)}})})(t).then(function(t){0===t.code?e(t):i(t)}).catch(function(t){i(t)}).finally(function(){var t=R.indexOf(a);-1!==t&&R.splice(t,1)})})},q=envConfig.requestDomain,E=function(t){return $({url:q+"/pet-api/bargain/loadShareCopy",data:t})},N=envConfig.requestDomain,B=(envConfig.manageDomain,function(t){return $({url:N+"/pet-api/logcount/addActivityLog",data:t})});envConfig.requestDomain,envConfig.requestDomain,envConfig.requestDomain;r.default.component(a.a.name,a.a);String;r.default.component(a.a.name,a.a);var F={name:"rule",props:{text:{type:String,default:""},value:{default:!1}},watch:{showPopup:function(t){this.$emit("input",t)},value:function(t){this.showPopup=t}},data:function(){return{showPopup:!1}}},M={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("mt-popup",{attrs:{zIndex:"990"},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[i("div",{staticClass:"rule-popup"},[i("div",{staticClass:"rule-btn",on:{click:function(t){e.showPopup=!1}}},[i("img",{attrs:{src:n("YRwD")}})]),e._v(" "),i("div",{staticClass:"rule-content"},[i("div",{staticClass:"rule-title"},[i("div",[e._v("活动规则")])]),e._v(" "),i("div",{staticClass:"rule-text",domProps:{innerHTML:e._s(e.text)}})])])])},staticRenderFns:[]};var z=n("VU/8")(F,M,!1,function(t){n("bGua")},null,null).exports,V=(Number,Number,String,String,String,{name:"countdown",props:{milliseconds:{type:Number,default:0},speed:{type:Number,default:1e3},text:{type:String,default:"后结束"},fontSize:{type:String,default:"0.24rem"},color:{type:String,default:"#3A3636"}},data:function(){return{countdown:this.milliseconds,countDownTip:""}},computed:{style:function(){return{fontSize:this.fontSize,color:this.color}}},created:function(){this.loop()},methods:{loop:function(){var t=this;this.countdown>this.speed?setTimeout(function(){t.countdown-=t.speed,t.loop()},this.speed):(this.countdown=0,this.$emit("over"));for(var e=[parseInt(this.countdown/1e3/60/60),parseInt(this.countdown/1e3/60%60),parseInt(this.countdown/1e3%60)],i=0,a=e.length;i<a;++i)e[i]=9<e[i]?""+e[i]:"0"+e[i];var s=e[0],n=e[1],o=e[2];this.countDownTip=this.countdown?"<span>"+s+"</span>&nbsp;:&nbsp;<span>"+n+"</span>&nbsp;:&nbsp;<span>"+o+"</span>"+this.text:""}}}),Q={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.$style.countdown,style:t.style,domProps:{innerHTML:t._s(t.countDownTip)}})},staticRenderFns:[]};var Y=n("VU/8")(V,Q,!1,function(t){this.$style=n("oYzV")},null,null).exports,H=function(){h.android&&window.fromh5data.login(),h.ios&&(window.location.href="pethome://login")},W=function(t,e,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:config.shareImg;h.android||h.ios?t&&e&&i?(h.android&&(h.version<"4.9.5"?window.fromh5data.shareCardInfoDidlog(e,a,i,t):h.version<"5.0.0"?window.fromh5data.shareCardInfoDidlogNoQQ(e,a,i,t):window.fromh5data.shareCardInfoDidlog(t,a,i,e,"1,2")),h.ios&&(!function(t,e,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:config.shareImg,s=document.querySelector('meta[name="sharetitle"]'),n=document.querySelector('meta[name="description"]'),o=document.querySelector('meta[name="shareimg"]'),r=document.querySelector('meta[name="shareurl"]');s&&n&&o&&r||console.warn("setshareinfoios 缺少标签"),t&&s&&s.setAttribute("content",t),e&&n&&n.setAttribute("content",e),a&&o&&o.setAttribute("content",a),i&&r&&r.setAttribute("content",i)}(t,e,i,a),window.location.href="pethome://share")):console.warn("sharepopup 缺少参数"):console.warn("sharepopup 不在客户端内")},X=function(){h.android&&window.fromh5lucy.coupon("1"),h.ios&&(window.location.href="pethome://coupon")},G=config.shareDesc,K=(g()({},Object(y.e)(["cellPhone","imei","system","activityRule","activityBgPic","curtab","bargainList","myTaskList","activityId","selectedPetId","selectedPetName","fetchLock","listpage"]),Object(y.c)(["getUrl"])),g()({sharepopup:W,tocoupon:X},Object(y.d)(["setCurtab","setFetchLock","updateListpage"]),Object(y.b)(["getMyTaskList","getBargainList"]),{inviteClick:function(t){var e=this,i=this.myTaskList[t];E({petId:i.taskContent.petId,serviceId:i.taskContent.serviceId}).then(function(t){if(!t.data)throw new Error("缺少分享文案");W(t.data,G,e.getUrl({taskId:i.taskId,bargainTaskId:i.userTaskId}),i.pic)}).catch(function(t){console.warn(t),t.msg&&Toast(t.msg)})},taskItemClick:function(t){var e=this.bargainList[t];B({cellPhone:this.cellPhone,system:this.system,imei:this.imei,type:2,activityInfoId:this.activityId,shareActivityId:e.id,taskId:1,pageType:1}),this.cellPhone?e.joinState?(this.clickedTaskId=e.id,this.clickedUserTaskId=e.userTaskId,this.serviceId=e.taskContent.serviceId,this.clickedPetId=e.taskContent.petId,this.showConfirm=!0):this.toSharePage(e.id):H()},toSharePage:function(t,e){window.location.href=this.getUrl({taskId:t,bargainTaskId:e})}}),config.shareDesc),Z={name:"list",data:function(){return{showRule:!1,showConfirm:!1,clickedTaskId:"",clickedUserTaskId:"",page:1,scrollLock:!1}},computed:g()({},Object(y.e)(["cellPhone","imei","system","activityRule","activityBgPic","curtab","bargainList","myTaskList","activityId","selectedPetId","selectedPetName","fetchLock","listpage"]),Object(y.c)(["getUrl"])),mounted:function(){var i=this;B({cellPhone:this.cellPhone,system:this.system,imei:this.imei,type:2,activityInfoId:this.activityId,shareActivityId:0,taskId:0,pageType:1}),window.addEventListener("scroll",function(){i.scrollLock||(i.scrollLock=!0,setTimeout(function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=document.body.clientHeight;if(document.body.scrollHeight-50<t+e){if(i.fetchLock)return;i.setFetchLock(!0),i.updateListpage(),i.getBargainList()}i.scrollLock=!1},200))})},methods:g()({sharepopup:W,tocoupon:X},Object(y.d)(["setCurtab","setFetchLock","updateListpage"]),Object(y.b)(["getMyTaskList","getBargainList"]),{inviteClick:function(t){var e=this,i=this.myTaskList[t];E({petId:i.taskContent.petId,serviceId:i.taskContent.serviceId}).then(function(t){if(!t.data)throw new Error("缺少分享文案");W(t.data,K,e.getUrl({taskId:i.taskId,bargainTaskId:i.userTaskId}),i.pic)}).catch(function(t){console.warn(t),t.msg&&Toast(t.msg)})},taskItemClick:function(t){var e=this.bargainList[t];B({cellPhone:this.cellPhone,system:this.system,imei:this.imei,type:2,activityInfoId:this.activityId,shareActivityId:e.id,taskId:1,pageType:1}),this.cellPhone?e.joinState?(this.clickedTaskId=e.id,this.clickedUserTaskId=e.userTaskId,this.serviceId=e.taskContent.serviceId,this.clickedPetId=e.taskContent.petId,this.showConfirm=!0):this.toSharePage(e.id):H()},toSharePage:function(t,e){window.location.href=this.getUrl({taskId:t,bargainTaskId:e})}}),components:{rule:z,countdown:Y}},J={render:function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"index"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===a.curtab,expression:"curtab === 0"}],staticClass:"list"},[s("div",{staticClass:"rule",on:{click:function(t){a.showRule=!0}}},[s("span",[a._v("活动规则")])]),a._v(" "),s("div",{staticClass:"listbanner"},[s("img",{attrs:{src:a.activityBgPic}})]),a._v(" "),s("div",{staticClass:"pet-tool pet",on:{click:function(t){a.$router.push("petlist")}}},[s("div",[a._v("选择宠物")]),a._v(" "),s("div",[s("div",{domProps:{textContent:a._s(a.selectedPetName)}}),a._v(" "),s("img",{attrs:{src:n("OagU")}})])]),a._v(" "),s("div",a._l(a.bargainList,function(e,i){return s("div",{key:"a"+i,staticClass:"tasklist-item",class:{over:0==e.noUseQuota},on:{click:function(t){a.$router.push("detail/"+e.id)}}},[s("div",{staticClass:"item-content"},[s("div",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pic,expression:"item.pic"}],key:e.pic}),a._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.noUseQuota,expression:"item.noUseQuota == 0"}]},[a._v("已抢光")])]),a._v(" "),s("div",[s("div",[s("div",{staticStyle:{"-webkit-box-orient":"vertical"},domProps:{textContent:a._s(e.name)}})]),a._v(" "),s("div",{staticClass:"tasklist-bottom"},[s("div",{staticClass:"tasklist-title"},[a._v("\n                                      ￥"),s("span",{staticClass:"font-bold",domProps:{textContent:a._s(e.price)}}),s("span",{staticClass:"font-red"},[a._v("免单名额:"+a._s(e.quota))])]),a._v(" "),0==e.noUseQuota?s("div",{staticClass:"global-btn grey",on:{click:function(t){t.stopPropagation()}}},[a._v("已抢光")]):s("div",{staticClass:"global-btn",on:{click:function(t){t.stopPropagation(),a.taskItemClick(i)}}},[a._v("我要免单")])])])])])}))]),a._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===a.curtab,expression:"curtab === 1"}],staticClass:"mylist"},[s("div",{staticClass:"pet-tool tool",on:{click:function(t){a.$router.push("tool")}}},[s("div",[a._v("我的道具")]),a._v(" "),a._m(0)]),a._v(" "),a.myTaskList.length?s("div",{staticClass:"mytasklist"},a._l(a.myTaskList,function(e,i){return s("div",{key:"b"+i,staticClass:"mytasklist-item",on:{click:function(t){a.toSharePage(e.taskId,e.userTaskId)}}},[s("div",{staticClass:"item-content"},[s("div",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pic,expression:"item.pic"}],key:e.pic}),a._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.stateTipIcon,expression:"item.stateTipIcon"}],domProps:{textContent:a._s(e.stateTipIcon)}})]),a._v(" "),s("div",[s("div",{staticClass:"mytasklist-title",class:{over:e.stateTipIcon}},[s("div",{staticStyle:{"-webkit-box-orient":"vertical"},domProps:{textContent:a._s(e.taskName)}})]),a._v(" "),s("div",[s("div",{staticClass:"mytasklist-statetip",domProps:{innerHTML:a._s(e.stateTip)}})])])]),a._v(" "),s("div",{staticClass:"mytasklist-bottom"},[s("div",[s("div",[1==e.state&&e.countDown?s("countdown",{attrs:{milliseconds:e.countDown},on:{over:a.getMyTaskList}}):a._e()],1),a._v(" "),s("div",{staticClass:"mytasklist-btn"},[1==e.state?s("div",{staticClass:"global-btn",on:{click:function(t){t.stopPropagation(),a.inviteClick(i)}}},[a._v("邀请好友")]):a._e(),a._v(" "),2==e.state?s("div",{staticClass:"global-btn w200",on:{click:function(t){return t.stopPropagation(),a.tocoupon(t)}}},[a._v("查看免单券")]):a._e(),a._v(" "),1<e.state?s("div",{staticClass:"global-btn",on:{click:function(t){t.stopPropagation(),a.setCurtab(0)}}},[a._v("再免一单")]):a._e()])])])])})):s("div",{staticClass:"empty"},[s("img",{attrs:{src:n("7nRF")}}),a._v(" "),s("div",[a._v("您目前没有砍价任务哦~")])])]),a._v(" "),s("div",{staticClass:"tab"},[s("div",{staticClass:"tab-item",class:{active:0===a.curtab},on:{click:function(t){a.setCurtab(0)}}},[s("div",[a._v("免单列表")])]),a._v(" "),s("div",{staticClass:"tab-item",class:{active:1===a.curtab},on:{click:function(t){a.setCurtab(1)}}},[s("div",[a._v("我的免单")])])])]),a._v(" "),s("rule",{attrs:{text:a.activityRule},model:{value:a.showRule,callback:function(t){a.showRule=t},expression:"showRule"}}),a._v(" "),s("mt-popup",{attrs:{zIndex:"990"},model:{value:a.showConfirm,callback:function(t){a.showConfirm=t},expression:"showConfirm"}},[s("div",[s("div",{staticClass:"join-clearbtn",on:{click:function(t){a.showConfirm=!1}}},[s("img",{attrs:{src:n("YRwD")}})]),a._v(" "),s("div",{staticClass:"join-popup"},[s("div",{staticClass:"join-title"},[s("img",{attrs:{src:n("7nRF")}}),a._v(" "),s("div",[a._v("该免单正在砍价中~")])]),a._v(" "),s("div",{staticClass:"join-btn",on:{click:function(t){a.toSharePage(a.clickedTaskId,a.clickedUserTaskId)}}},[s("div",{staticClass:"global-btn w433 h68"},[a._v("继续砍价")])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:n("OagU")}})])}]};var tt=n("VU/8")(Z,J,!1,function(t){n("gAVT")},"data-v-b5f345e6",null).exports,et=n("Xxa5"),it=n.n(et),at=n("exGp"),st=n.n(at),nt=envConfig.requestDomain,ot=function(t){return $({url:nt+"/pet-api/bargain/loadBargainTaskInfoPage",data:t})},rt=function(t){return $({url:nt+"/pet-api/bargain/loadBargainPropList",data:t})},ct=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";h.android||h.ios?t?(h.android&&window.fromh5lucy.goService(parseInt(t),""+e),h.ios&&(window.location.href="pethome://goPoint_"+t+"_"+e)):console.warn("pointbackup 缺少point"):console.warn("openshare 不在客户端内")},lt=config.downloadApp,dt=(g()({},Object(y.e)(["cellPhone","system","imei","activityId"]),Object(y.c)(["getUrl"])),config.downloadApp),ut={name:"detail",props:["id"],data:function(){return{swiperOption:{autoplay:{delay:2e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",bulletClass:"swiper-pagination-bullet"}},bannerData:[],detailImgsData:[],name:"",price:0,quota:0,noUseQuota:0,serviceId:"",petId:"",userTaskId:"",point:"",backup:"",systemInfo:h}},computed:g()({},Object(y.e)(["cellPhone","system","imei","activityId"]),Object(y.c)(["getUrl"])),created:function(){var i=this;return st()(it.a.mark(function t(){var e;return it.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot({cellPhone:i.cellPhone,system:i.system,imei:i.imei,activityId:i.activityId,taskId:i.id});case 3:if(!(e=t.sent).data){t.next=8;break}i.filterDetail(e.data),t.next=9;break;case 8:throw new Error(e);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}},t,i,[[0,11]])}))()},mounted:function(){B({cellPhone:this.cellPhone,system:this.system,imei:this.imei,type:2,activityInfoId:this.activityId,shareActivityId:this.id,taskId:0,pageType:2})},methods:{downloadApp:dt,pointbackup:ct,tabItemClick:function(){this.noUseQuota&&(B({cellPhone:this.cellPhone,system:this.system,imei:this.imei,type:2,activityInfoId:this.activityId,shareActivityId:this.id,taskId:1,pageType:2}),this.cellPhone?window.location.href=this.getUrl({taskId:this.id,serviceId:this.serviceId,petId:this.petId,bargainTaskId:this.userTaskId,source:1}):H())},filterDetail:function(t){t.userTaskId&&(this.userTaskId=t.userTaskId),t.name&&(this.name=t.name),t.price&&(this.price=t.price),t.quota&&(this.quota=t.quota),t.noUseQuota&&(this.noUseQuota=t.noUseQuota),t.picList3&&(this.bannerData=t.picList3),t.picList4&&(this.detailImgsData=t.picList4),t.taskContent&&(t.taskContent.petId&&(this.petId=t.taskContent.petId),t.taskContent.serviceId&&(this.serviceId=t.taskContent.serviceId),t.taskContent.point&&(this.point=t.taskContent.point),t.taskContent.backup&&(this.backup=t.taskContent.backup))}}},pt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"index"},[i("div",{staticClass:"content"},[i("div",{staticClass:"banner"},[i("div",{staticClass:"banner-box"},[i("swiper",{attrs:{options:e.swiperOption}},[e._l(e.bannerData,function(t,e){return i("swiper-slide",{key:"a"+e},[i("img",{staticClass:"banner-swiper-item",attrs:{src:t}})])}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1<e.bannerData.length,expression:"bannerData.length > 1"}],staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)]),e._v(" "),i("div",{staticClass:"title"},[i("div",{staticClass:"title-name",staticStyle:{"-webkit-box-orient":"vertical"}},[i("div",{domProps:{textContent:e._s(e.name)}})]),e._v(" "),i("div",{staticClass:"title-price"},[i("span",[e._v("￥"+e._s(e.price))]),e._v(" "),i("span",[e._v("免单名额:"+e._s(e.quota))])])]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"detail-imgs"},e._l(e.detailImgsData,function(t,e){return i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}],key:"b"+e})}))]),e._v(" "),i("div",{staticClass:"tab"},[e.systemInfo.ios&&e.systemInfo.version<"5.0.0"?e._e():i("div",{staticClass:"tab-item",on:{click:function(t){e.pointbackup(e.point,e.backup)}}},[i("div",[e._v("直接下单")])]),e._v(" "),i("div",{staticClass:"tab-item",class:{over:!e.noUseQuota},on:{click:e.tabItemClick}},[i("div",[e._v("我要免单")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pet-tool red"},[e("div",[e("span"),this._v(" "),e("span",[this._v("服务介绍")])])])}]};var vt=n("VU/8")(ut,pt,!1,function(t){n("LWuY")},"data-v-7e19e105",null).exports,mt=(g()({},Object(y.e)(["cellPhone","system","imei","activityId"])),g()({},Object(y.d)(["setCurtab"])),{name:"tool",data:function(){return{toolListData:[]}},computed:g()({},Object(y.e)(["cellPhone","system","imei","activityId"])),methods:g()({},Object(y.d)(["setCurtab"])),created:function(){var i=this;return st()(it.a.mark(function t(){var e;return it.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,rt({cellPhone:i.cellPhone,system:i.system,imei:i.imei,activityId:i.activityId});case 3:if(!(e=t.sent).data){t.next=8;break}e.data.propList&&(i.toolListData=e.data.propList),t.next=9;break;case 8:throw new Error(e);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}},t,i,[[0,11]])}))()}}),ht={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"index"},[i.toolListData.length?a("div",{staticClass:"list"},i._l(i.toolListData,function(t,e){return a("div",{key:"a"+e,staticClass:"item"},[a("div",[a("div",[i._m(0,!0),i._v(" "),a("div",{staticClass:"tool-text"},[a("div",{domProps:{textContent:i._s(t.name)}}),i._v(" "),a("div",[i._v("使用"+i._s(t.name)+"可以多砍一刀哦~")])])]),i._v(" "),a("div",{staticClass:"global-btn w156",on:{click:function(t){i.setCurtab(0),i.$router.push("list")}}},[i._v("去使用")])])])})):a("div",{staticClass:"empty"},[a("img",{attrs:{src:n("7nRF")}}),i._v(" "),a("div",[i._v("目前还没有获得道具哦~")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tool-img"},[e("img",{attrs:{src:n("57QP")}})])}]};var ft=n("VU/8")(mt,ht,!1,function(t){n("WwRZ")},"data-v-ed0f1196",null).exports;r.default.use(c.a);var gt=new c.a({routes:[{path:"/",redirect:"/list"},{path:"/list",name:"list",component:tt,meta:{title:"活动列表"}},{path:"/petlist",name:"petlist",component:T,meta:{title:"宠物列表"}},{path:"/detail/:id",name:"detail",component:vt,meta:{title:"服务详情"},props:!0},{path:"/tool",name:"tool",component:ft,meta:{title:"我的道具"}}],scrollBehavior:function(t,e,i){return i||{x:0,y:0}}});gt.afterEach(function(t){var e;t.meta.title&&(e=t.meta.title,document.title=e,h.ios&&"4.9.999"<h.version&&(window.location.href="pethome://changeTitle_"+e))});var yt=gt,kt=config.cellPhoneReg;r.default.use(y.a);var bt={getUrl:function(u){return function(t){t=t||{};var e=u.cellPhone||"",i=u.imei||"",a=u.system||"",s=u.activityId||"",n=t.taskId||"",o=t.bargainTaskId||"",r=t.source||0,c=u.selectedPetId||"",l=u.selectedPetName||"",d=u.curtab||"";return config.bargainShareUrl+"?cellPhone="+e+"&imei="+i+"&system="+a+"&activityId="+s+"&bargainTaskId="+o+"&taskId="+n+"&selectedPetId="+c+"&selectedPetName="+l+"&curtab="+d+"&source="+r+"&t="+config.refresh}}},wt={saveParams:function(t,e){e.cellPhone&&kt.test(e.cellPhone)&&(t.cellPhone=e.cellPhone),e.imei&&(t.imei=e.imei),e.system&&(t.system=e.system),e.activityId&&(t.activityId=e.activityId)},updateCellPhone:function(t,e){e&&kt.test(e)&&(t.cellPhone=e)},setActivityInfo:function(t,e){var i=(e=e||{}).taskInfoList||[];if(i&&Array.isArray(i)&&i.length){var a=!0,s=!1,n=void 0;try{for(var o,r=m()(i);!(a=(o=r.next()).done);a=!0){var c=o.value;t.bargainList.push(c)}}catch(t){s=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}t.fetchLock=!1}e.activityRule&&(t.activityRule=e.activityRule),e.activityBgPic&&(t.activityBgPic=e.activityBgPic)},setCurtab:function(t,e){e!=t.curtab&&(0<e?t.cellPhone?t.curtab=1:H():t.curtab=0,window.scrollTo(0,0))},setSelectedPetInfo:function(t,e){var i=e.id,a=e.name,s=e.tabIndex;void 0!==i&&(t.selectedPetId=i),void 0!==a&&(t.selectedPetName=a),void 0!==s&&(t.petListCurtab=s)},setMyTaskList:function(t,e){if(e&&Array.isArray(e)){var i=!0,a=!1,s=void 0;try{for(var n,o=m()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;1==r.state&&(r.stateTip="已砍<span>"+r.completePrice+"</span>元，还差<span>"+r.noCompletePrice+"</span>元"),2==r.state&&(r.stateTip='<span class="font-red">免单成功，已砍'+r.taskContent.servicePrice+"元</span>"),3==r.state&&(r.stateTipIcon="已过期",r.stateTip="未在活动时间内完成，已过期"),4==r.state&&(r.stateTipIcon="已过期",r.stateTip="未在24小时内完成，已过期"),5==r.state&&(r.stateTipIcon="已抢光",r.stateTip="小伙伴非常厉害，名额已抢光~")}}catch(t){a=!0,s=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}t.myTaskList=e}},setPetList:function(t,e){t.petList=e},setToolList:function(t,e){var i=(e=e||{}).propList||[];i&&Array.isArray(i)&&(t.toolList=i)},setFetchLock:function(t,e){t.fetchLock=e},updateListpage:function(t,e){console.log(e),e?t.listpage=parseInt(e)||1:t.listpage++}},It={getBargainList:function(t){var e=this,a=t.commit,s=t.state;return st()(it.a.mark(function t(){var i;return it.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return 1==s.listpage&&(s.bargainList=[]),t.prev=1,t.next=4,e={cellPhone:s.cellPhone,system:s.system,imei:s.imei,activityId:s.activityId,petId:s.selectedPetId,page:s.listpage},$({url:nt+"/pet-api/bargain/loadBargainListPage",data:e});case 4:if(!(i=t.sent).data){t.next=11;break}a("setActivityInfo",i.data),0==i.data.status&&Toast("活动未开始"),2==i.data.status&&Toast("活动已结束"),t.next=12;break;case 11:throw new Error(i);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.warn(t.t0);case 17:case"end":return t.stop()}var e},t,e,[[1,14]])}))()},getMyTaskList:function(t){var e=this,a=t.commit,s=t.state;return st()(it.a.mark(function t(){var i;return it.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e={cellPhone:s.cellPhone,system:s.system,imei:s.imei,activityId:s.activityId},$({url:nt+"/pet-api/bargain/loadBargainUserTaskList",data:e});case 3:if(!(i=t.sent).data||!i.data.taskList){t.next=8;break}a("setMyTaskList",i.data.taskList),t.next=9;break;case 8:throw new Error(i);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}var e},t,e,[[0,11]])}))()},getPetList:function(t,a){var e=this,s=t.commit,n=t.state;return st()(it.a.mark(function t(){var i;return it.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e={cellPhone:n.cellPhone,system:n.system,imei:n.imei,activityId:n.activityId,petName:a||""},$({url:nt+"/pet-api/pet/queryActivityBargainPetList\n        ",data:e});case 3:if(!(i=t.sent).data){t.next=8;break}s("setPetList",i.data),t.next=9;break;case 8:throw new Error(i);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}var e},t,e,[[0,11]])}))()},getToolList:function(t){var i=this,a=t.commit,s=t.state;return st()(it.a.mark(function t(){var e;return it.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,rt({cellPhone:s.cellPhone,system:s.system,imei:s.imei,activityId:s.activityId});case 3:if(!(e=t.sent).data){t.next=8;break}a("setToolList",e.data),t.next=9;break;case 8:throw new Error(e);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}},t,i,[[0,11]])}))()}},Pt=new y.a.Store({state:{cellPhone:"",system:"",imei:"",activityId:"",taskId:"",selectedPetId:"",selectedPetName:"",petListCurtab:0,curtab:0,bargainList:[],activityRule:"",activityBgPic:"",myTaskList:[],petList:[],toolList:[],fetchLock:!1,listpage:1},getters:bt,actions:It,mutations:wt}),Ct=n("cTzj"),_t=n.n(Ct),xt=function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location.href).split("#")[0].split("23%")[0].split("?"),i=e[0],a=e[1]?e[1].split("&"):[],s={},n=!0,o=!1,r=void 0;try{for(var c,l=m()(a);!(n=(c=l.next()).done);n=!0){var d=c.value;s[d.split("=")[0]]=d.split("=")[1]||""}}catch(t){o=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}var u="",p=function(t,e){var i={};for(var a in t)i[a]=t[a];for(var s in e)i[s]=e[s];return i}(s,t);for(var v in p)u+=v+"="+p[v]+"&";return i+(u?"?"+u.substring(0,u.length-1):"")},Lt=d(),Tt=(g()({},Object(y.d)(["saveParams","updateCellPhone","setCurtab","setSelectedPetInfo"]),Object(y.b)(["getBargainList","getMyTaskList"])),d()),St={name:"App",methods:g()({},Object(y.d)(["saveParams","updateCellPhone","setCurtab","setSelectedPetInfo"]),Object(y.b)(["getBargainList","getMyTaskList"])),created:function(){this.saveParams(Tt),this.setCurtab(Tt.curtab),this.setSelectedPetInfo({id:Tt.selectedPetId,name:decodeURIComponent(Tt.selectedPetName||"")}),Tt.petredirect&&this.$router.push(Tt.petredirect),this.getBargainList(),Tt.cellPhone?this.getMyTaskList():window.init_roll=function(t){var e=xt({cellPhone:t});window.location.href=e}}},Ot={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var Ut=n("VU/8")(St,Ot,!1,function(t){n("SMX/")},null,null).exports;n("UoMW");!function(t,e){if((e=e||{}).favicon){var i=[];t.querySelector('link[rel="shortcut icon"]')&&i.push(t.querySelector('link[rel="shortcut icon"]')),t.querySelector('link[rel="icon"]')&&i.push(t.querySelector('link[rel="icon"]')),t.querySelector('link[rel="apple-touch-icon-precomposed"]')&&i.push(t.querySelector('link[rel="apple-touch-icon-precomposed"]'));var a=!0,s=!1,n=void 0;try{for(var o,r=m()(i);!(a=(o=r.next()).done);a=!0){o.value.setAttribute("href",e.favicon)}}catch(t){s=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}}}(document,config);var At=n("7QTg"),Dt=n.n(At);n("v2ns");r.default.use(Dt.a),r.default.use(_t.a),window.Toast=o.a,r.default.component(a.a.name,a.a),new r.default({router:yt,store:Pt,components:{App:Ut},render:function(t){return t(Ut)}}).$mount("#app")},LWuY:function(t,e){},OagU:function(t,e,i){t.exports=i.p+"../../../static/images/icons/arrow.png"},"SMX/":function(t,e){},UoMW:function(t,e){var i,a,s,n,o,r;i=document,a=window,s=i.documentElement,n=a.config.pageWidth,o="orientationchange"in a?"orientationchange":"resize",r=function(){var t=s.clientWidth;s.style.fontSize=0<n?(t&&t<n?t:n)/7.5+"px":t/7.5+"px"},i.addEventListener&&(a.addEventListener(o,r,!1),i.addEventListener("DOMContentLoaded",r,!1),setTimeout(function(){0===parseInt(i.defaultView.getComputedStyle(s).fontSize)&&r()},3e3))},VmDL:function(t,e){t.exports={petlist:"src-components-petList--index-1GlUd_0",tab:"src-components-petList--index-1It7h_0",active:"src-components-petList--index-1y5X6_0",search:"src-components-petList--index-3S3pq_0",title:"src-components-petList--index-QXI0K_0",item:"src-components-petList--index-aqEp3_0"}},WwRZ:function(t,e){},YRwD:function(t,e,i){t.exports=i.p+"../../../static/images/icons/clear.png"},bGua:function(t,e){},gAVT:function(t,e){},oYzV:function(t,e){t.exports={countdown:"src-components-201809--countdown-1oarw_0"}},"q/am":function(t,e){},sKV8:function(t,e,i){t.exports=i.p+"../../../static/images/icons/allright.png"},v2ns:function(t,e){}},["Iatn"]);
//# sourceMappingURL=app.d168263bdb318d3a17cf.js.map