webpackJsonp([1],{"/8LK":function(e,t){},ErAa:function(e,t){},UbJd:function(e,t,n){e.exports=n.p+"../../../static/images/201808/inviteshare/vip.png"},UoMW:function(e,t){var n,i,a,o,s,r;n=document,i=window,a=n.documentElement,o=i.config.pageWidth,s="orientationchange"in i?"orientationchange":"resize",r=function(){var e=a.clientWidth;a.style.fontSize=0<o?(e&&e<o?e:o)/7.5+"px":e/7.5+"px",i.rem=e/7.5},n.addEventListener&&(i.addEventListener(s,r,!1),n.addEventListener("DOMContentLoaded",r,!1),setTimeout(function(){0===parseInt(n.defaultView.getComputedStyle(a).fontSize)&&r()},3e3))},WtDM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("/5sW"),a=i("NC6I"),o=i.n(a),s=i("bOdI"),r=i.n(s),c=config.downloadApp,d=config.downloadLogo,l=config.downloadTitle,u=config.downloadDescription,v=(String,config.downloadApp),p=config.downloadLogo,g=config.downloadTitle,f=config.downloadDescription,h={name:"download",props:{position:{type:String,default:"bottom"}},data:function(){return{style:r()({},this.position,0),downloadLogo:p,downloadTitle:g,downloadDescription:f}},methods:{downloadApp:v}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.download,style:e.style},[n("div",{class:e.$style.content},[n("img",{attrs:{src:e.downloadLogo,alt:"宠物家"}}),e._v(" "),n("div",{class:e.$style.slogen},[n("span",{domProps:{textContent:e._s(e.downloadTitle)}}),e._v(" "),n("span",{domProps:{textContent:e._s(e.downloadDescription)}})])]),e._v(" "),n("div",{class:e.$style.btn,on:{click:e.downloadApp}},[e._v("立即打开")])])},staticRenderFns:[]};var w=i("VU/8")(h,m,!1,function(e){this.$style=i("r2eQ")},null,null).exports,y=(Boolean,String,String,String,{name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(e){this.$emit("update:show",e)}}}),C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:e.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading",class:e.text?"":"vux-loading-no-text"},[n("div",{staticClass:"weui-mask_transparent"}),e._v(" "),n("div",{staticClass:"weui-toast",style:{position:e.position}},[n("i",{staticClass:"weui-loading weui-icon_toast"}),e._v(" "),e.text?n("p",{staticClass:"weui-toast__content"},[e._v(e._s(e.text||"加载中")),e._t("default")],2):e._e()])])])},staticRenderFns:[]};var x=i("VU/8")(y,C,!1,function(e){i("ErAa")},null,null).exports,_=i("Xxa5"),b=i.n(_),T=i("exGp"),D=i.n(T),I=i("//Fk"),S=i.n(I),k=i("fxnj"),P=i.n(k),O=i("pFYg"),U=i.n(O),A=i("fZjL"),j=i.n(A),q=[],E=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new S.a(function(t,n){var i=e.url;if(!e.concurrent){if(i=i.split("?")[0],-1!==q.indexOf(i))return void n(new Error("请求并发 "+i));q.push(i)}(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=e.type?e.type.toUpperCase():"POST",s=e.url||"",r=e.contentType||"application/x-www-form-urlencoded",c=e.data||{},d=!1!==e.async;return new S.a(function(t,n){var i={};i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject;var a="";j()(c).forEach(function(e){a+=e+"="+c[e]+"&"}),a=a.substr(0,a.lastIndexOf("&")),"GET"==o?(s=a?s+"?"+a:s,i.open(o,s,d),i.setRequestHeader("Content-type",r),i.send()):"POST"==o?(c.system&&(s=0<s.indexOf("?")?s+"&system="+c.system:s+"?system="+c.system),i.open(o,s,d),i.setRequestHeader("Content-type",r),i.send(a)):n(new Error("不支持的type")),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var e=i.response;"object"!==(void 0===e?"undefined":U()(e))&&(e=JSON.parse(e)),t(e)}else n(i)}})})(e).then(function(e){0===e.code?t(e):n(e)}).catch(function(e){n(e)}).finally(function(){var e=q.indexOf(i);-1!==e&&q.splice(e,1)})})},L=envConfig.requestDomain,M=(envConfig.manageDomain,function(e){return E({url:L+"/pet-api/wx/ticket",data:{code:e}})}),V=function(e){return E({url:L+"/pet-api/logcount/addActivityLog",data:e})},B=(envConfig.requestDomain,envConfig.requestDomain),N=function(e){return E({url:B+"/pet-api/activity/invite/getUserInviteCode",data:e})},$=envConfig.requestDomain,F=function(e){return $+"/pet-api/activity/invite/generateImageCode?mobileKey="+e},R=function(e){return E({url:$+"/pet-api/activity/invite/genVerifyCode",data:e})},X=function(e){return E({url:$+"/pet-api/activity/invite/loadInviterMessage",data:e})},K=function(e){return E({url:$+"/pet-api/activity/invite/isBindingOpenId",data:{openId:e}})},W=navigator.userAgent,Q=(-1<W.indexOf("Android")||W.indexOf("Linux"),-1<W.indexOf("iPhone")||W.indexOf("iPad"),W.indexOf("iPhone"),-1<W.toLowerCase().indexOf("micromessenger")),z=this,G=function(o){if(!Q)return!1;var n,e=config.shareImg,s=config.wxShareDebug;return(o=o||{}).title=o.title||"",o.desc=o.desc||"",o.link=o.link||window.location.href,o.imgUrl=o.imgUrl||e,new S.a((n=D()(b.a.mark(function e(n,i){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=location.href,E({url:L+"/pet-api/wx/sign",data:{url:encodeURIComponent(t)},type:"get"})).catch(function(){i(new Error("sign error"))});case 2:0!==(a=e.sent).code&&i(new Error("sign code "+a.code+" "+a.msg)),P.a.config({debug:!0===s,appId:a.data.appId,timestamp:a.data.timestamp,nonceStr:a.data.nonceStr,signature:a.data.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ"]}),o.success=function(e){n(e)},o.cancel=function(e){n(e)},P.a.ready(function(){P.a.onMenuShareAppMessage(o),P.a.onMenuShareTimeline(o),P.a.onMenuShareQQ(o)});case 8:case"end":return e.stop()}var t},e,z)})),function(e,t){return n.apply(this,arguments)}))},H=i("BO1k"),J=i.n(H),Y=function(){var e=window.location.href.split("?"),t={};if(1<e.length){var n=e[1],i=-1!==n.indexOf("%23/")?n.indexOf("%23/"):n.indexOf("#/");-1!==i&&(n=n.substr(0,i));var a=!0,o=!1,s=void 0;try{for(var r,c=J()(n.split("&"));!(a=(r=c.next()).done);a=!0){var d=r.value.split("=");d[0]&&(t[d[0]]=d[1]||"")}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}}return t},Z=envConfig.shareAppid,ee=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.location.href,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=Y().code;if(!Q||n&&!t)return n;window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+Z+"&redirect_uri="+escape(e)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"},te=(config.oldUserTip1,config.oldUserTip2,config.oldUserTip3,config.inviteShareTitle,config.inviteShareDesc,config.inviteShareImg,config.inviteShareUrl,config.cellPhoneReg,config.oldUserTip1),ne=config.oldUserTip2,ie=config.oldUserTip3,ae=config.inviteShareTitle,oe=config.inviteShareDesc,se=config.inviteShareImg,re=config.inviteShareUrl,ce=config.cellPhoneReg,de={name:"index",data:function(){return{oldUserTip1:te,oldUserTip2:ne,oldUserTip3:ie,loading:!0,showXrlb:!1,xrlblist:[],newuser:!0,userName:"",avatar:"",isVip:"",genVerifyCodeFlag:!1,newUserInvitedFlag:!1,mobileKey:"",cellPhone:"",imgcode:"",imgcodeUrl:"",getCodeBtnText:"获取验证码",getCodeBtnClass:"",code:""}},components:{downloadComp:w,Loading:x},created:function(){var t=this;alert("活动已结束！"),this.loading=!0;var e=Y();this.inviteData.activityId=e.activityId||"",this.inviteData.inviteCode=e.inviteCode201806||"",this.inviteData.cellPhone=e.cellPhone||"",this.inviteData.system=e.system||"",this.inviteData.imei=e.imei||"",this.inviteData.inviteCode||N({cellPhone:this.inviteData.cellPhone,system:this.inviteData.system,imei:this.inviteData.imei,activityId:this.inviteData.activityId}).then(function(e){t.inviteData.inviteCode=e.data.inviteCode}).catch(function(e){e.status&&Toast(e.status)});var n=re(this.inviteData.inviteCode,this.inviteData.activityId);if(Q){var i=ee(n);i?(G({title:ae(),desc:oe,imgUrl:se,link:n}),M(i).then(function(e){return t.inviteData.activityId&&V({activityInfoId:0,shareActivityId:t.inviteData.activityId,taskId:0}),40163===e.data.errcode&&ee(n,!0),t.inviteData.openid=e.data.openid||"",K(t.inviteData.openid)}).then(function(e){1===e.data.status&&(t.newuser=!1)}).catch(function(e){e.status&&Toast(e.status)}).finally(function(){t.loading=!1})):ee(n,!0)}else this.loading=!1,this.inviteData.activityId&&V({activityInfoId:0,shareActivityId:this.inviteData.activityId,taskId:0});X({activityId:this.inviteData.activityId,inviteCode:this.inviteData.inviteCode}).then(function(e){t.isVip=0<e.data.memberLevel,t.avatar=e.data.avatar||"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15732900299464274914.png",t.userName=e.data.userName})},beforeMount:function(){this.updateCode()},methods:{share:function(){Toast("立即打开APP邀请好友"),setTimeout(function(){window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.haotang.pet&g_f=991653"},2e3)},touse:function(){window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.haotang.pet&g_f=991653"},updateCode:function(){this.mobileKey=""+(new Date).getTime()+parseInt(1e5*(9*Math.random()+1)),this.imgcodeUrl=F(this.mobileKey)},genVerifyCode:function(){var t=this;if(!this.genVerifyCodeFlag){var e={openId:this.inviteData.openid,code:this.imgcode.trim(),phone:this.cellPhone.trim(),mobileKey:this.mobileKey,encryptionCode:o()("haotang_jishubu01"+this.cellPhone.trim())};e.phone?ce.test(e.phone)?e.code?e.code.length<4?Toast("请检查图形验证码"):(this.genVerifyCodeFlag=!0,R(e).then(function(e){t.getCodeBtnClass="grey",t.countBackwards({total:60,callback:function(e){e?t.getCodeBtnText=e+"秒":(t.getCodeBtnClass="",t.getCodeBtnText="重新获取",t.genVerifyCodeFlag=!1)}})}).catch(function(e){e&&(1011===e.code?t.newuser=!1:e.code?Toast(e.msg):Toast(e.status)),t.genVerifyCodeFlag=!1})):Toast("请输入图形验证码"):Toast("请检查手机号"):Toast("请输入手机号")}},countBackwards:function(e){var n=this,i=(e=e||{}).total?e.total:10,a=e.speed?e.speed:1,o=e.time?e.time:1e3,s=e.counted?e.counted:0,r=e.callback?e.callback:0,c=e.callbackOnce?e.callbackOnce:0,d=e.callbackEnd?e.callbackEnd:0,l=0<=i-s?i-s:0,t=setTimeout(function(e){if(0!==l){var t=0<=l-a?l-a:0;s+=a,r&&r(t),c&&c(t),0==t&&d&&d(t),n.countBackwards({total:i,speed:a,time:o,counted:s,callback:r,callbackOnce:c,callbackEnd:d})}else null},o);console.log(t)},newUserInvited:function(){alert("活动已结束！")}}},le={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("loading",{attrs:{show:t.loading,text:""}}),t._v(" "),t.loading?t._e():n("div",{staticClass:"index"},[t.newuser?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showXrlb,expression:"!showXrlb"}],staticClass:"newuser"},[n("div",{staticClass:"newuser-title"},[n("div",{staticClass:"title-avatar"},[n("img",{attrs:{src:t.avatar&&"http://demo.cwjia.cn"!==t.avatar&&"http://static.ichongwujia.com"!==t.avatar?t.avatar:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15732900299464274914.png"}}),t._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:t.isVip,expression:"isVip"}],attrs:{src:i("UbJd")}})]),t._v(" "),n("div",{staticClass:"slogen"},[n("span",{},[t._v("您的好友 "+t._s(t.userName))]),t._v(" "),n("span",[t._v("送你宠物家新人优惠")])])]),t._v(" "),n("div",{staticClass:"newuser-content"},[n("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15732900299017557492.png"}}),t._v(" "),n("div",[n("div",{staticClass:"newuser-form"},[n("div",{staticClass:"form-cellPhone"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cellPhone,expression:"cellPhone"}],attrs:{type:"number",placeholder:"请输入手机号 领取大礼包"},domProps:{value:t.cellPhone},on:{input:function(e){e.target.composing||(t.cellPhone=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-imgcode"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.imgcode,expression:"imgcode"}],attrs:{type:"number",placeholder:"请输入图形验证码"},domProps:{value:t.imgcode},on:{input:function(e){e.target.composing||(t.imgcode=e.target.value)}}}),t._v(" "),n("img",{attrs:{src:t.imgcodeUrl},on:{click:function(e){return e.stopPropagation(),t.updateCode(e)}}})]),t._v(" "),n("div",{staticClass:"form-code"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"number",placeholder:"请输入验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),n("span",{class:t.getCodeBtnClass,on:{click:function(e){return e.stopPropagation(),t.genVerifyCode(e)}}},[t._v(t._s(t.getCodeBtnText))])])]),t._v(" "),n("div",{staticClass:"newuser-btn",on:{click:t.newUserInvited}},[n("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15732900295906284281.png"}})])])])]):n("div",{staticClass:"olduser-box"},[n("div",{staticClass:"olduser"},[t._m(0),t._v(" "),n("div",{on:{click:t.share}},[n("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15732900923970218588.png"}})])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showXrlb,expression:"showXrlb"}],staticClass:"xrlbbox"},[n("div",{staticClass:"xrlb"},[t._m(1),t._v(" "),n("img",{staticClass:"xrlb-btn",attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15732900685056488195.png"},on:{click:t.touse}})])]),t._v(" "),n("download-comp")],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"olduserimg"},[t("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15732900923405529524.png",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"newuserimg"},[t("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15762357202316290305.png",alt:""}}),this._v(" "),t("img",{attrs:{src:"http://dev-pet-avatar.oss-cn-beijing.aliyuncs.com/html5/15922904840082228947.png",alt:""}})])}]};var ue=i("VU/8")(de,le,!1,function(e){i("/8LK")},null,null).exports,ve=i("cTzj"),pe=i.n(ve),ge=i("Au9i");i("UoMW");!function(e,t){if((t=t||{}).favicon){var n=[];e.querySelector('link[rel="shortcut icon"]')&&n.push(e.querySelector('link[rel="shortcut icon"]')),e.querySelector('link[rel="icon"]')&&n.push(e.querySelector('link[rel="icon"]')),e.querySelector('link[rel="apple-touch-icon-precomposed"]')&&n.push(e.querySelector('link[rel="apple-touch-icon-precomposed"]'));var i=!0,a=!1,o=void 0;try{for(var s,r=J()(n);!(i=(s=r.next()).done);i=!0){s.value.setAttribute("href",t.favicon)}}catch(e){a=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(a)throw o}}}}(document,config),n.default.use(pe.a),window.Toast=ge.Toast;var fe=navigator.userAgent;n.default.prototype.inviteData={android:-1<fe.indexOf("Android")||-1<fe.indexOf("Linux"),ios:-1<fe.indexOf("iPhone")||-1<fe.indexOf("iPad"),weixin:-1<fe.toLowerCase().indexOf("micromessenger"),openid:"",activityId:"",inviteCode:""},new n.default({components:{index:ue},render:function(e){return e(ue)}}).$mount("#app")},r2eQ:function(e,t){e.exports={download:"src-components--download-3Gy4G_0",content:"src-components--download-1qp7S_0",slogen:"src-components--download-32GTD_0",btn:"src-components--download-2em-R_0"}}},["WtDM"]);
//# sourceMappingURL=app.8e81a0490b27f50ba8d8.js.map